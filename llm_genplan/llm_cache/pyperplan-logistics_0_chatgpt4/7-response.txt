def get_plan(task):
    plan = []

    for goal_atom in task.goal:
        if goal_atom[0] == 'at':
            pkg, target_loc = goal_atom[1], goal_atom[2]
            target_city = get_city_of_location(task, target_loc)
            pkg_loc, pkg_city = None, None

            for atom in task.init:
                if atom[0] == 'at' and atom[1] == pkg:
                    pkg_loc = atom[2]
                    pkg_city = get_city_of_location(task, pkg_loc)
                    break

            if pkg_city != target_city:
                airplane = get_vehicle_at_location(task, pkg_loc, 'airplane')
                if airplane is not None:
                    intermediate_airport = None
                    for atom in task.init:
                        if atom[0] == 'in-city' and atom[2] == target_city:
                            intermediate_airport = atom[1]
                            break

                    plan.append(load_package(task, pkg, airplane, 'airplane', pkg_loc))
                    plan.append(fly_airplane(task, airplane, pkg_loc, intermediate_airport))
                    plan.append(unload_package(task, pkg, airplane, 'airplane', intermediate_airport))
                    pkg_loc = intermediate_airport

            if pkg_loc != target_loc:
                truck = get_vehicle_at_location(task, pkg_loc, 'truck')
                plan.append(load_package(task, pkg, truck, 'truck', pkg_loc))
                plan.append(drive_vehicle(task, truck, pkg_loc, target_loc, target_city))
                plan.append(unload_package(task, pkg, truck, 'truck', target_loc))

    return plan
