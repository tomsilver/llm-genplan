The code raised the following exception:
Traceback (most recent call last):
  File "<file-name-omitted>", line 68, in get_plan
    next_loc = next_location(path[-1], visited, links)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<file-name-omitted>", line -1, in next_location
KeyboardInterrupt

The code was interrupted because it timed out (possible infinite loop).
Fix the code.